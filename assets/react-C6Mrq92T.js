import{r as I,R as F}from"./index-CA2X5CoY.js";const w={BASE_URL:"/rsvp-site/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_USE_EMULATORS:"false"};function j(t){return"init"in t}function R(t){return!!t.write}function z(t){return"v"in t||"e"in t}function C(t){if("e"in t)throw t.e;if((w?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v}const O=new WeakMap;function J(t){var n;return M(t)&&!!((n=O.get(t))!=null&&n[0])}function tt(t){const n=O.get(t);n?.[0]&&(n[0]=!1,n[1].forEach(o=>o()))}function U(t,n){let o=O.get(t);if(!o){o=[!0,new Set],O.set(t,o);const e=()=>{o[0]=!1};t.then(e,e)}o[1].add(n)}function M(t){return typeof t?.then=="function"}function $(t,n,o){if(!o.p.has(t)){o.p.add(t);const e=()=>o.p.delete(t);n.then(e,e)}}function q(t,n,o){var e;const s=new Set;for(const i of((e=o.get(t))==null?void 0:e.t)||[])s.add(i);for(const i of n.p)s.add(i);return s}const nt=(t,n,...o)=>n.read(...o),et=(t,n,...o)=>n.write(...o),ot=(t,n)=>{if(n.INTERNAL_onInit)return n.INTERNAL_onInit(t);if(n.unstable_onInit)return console.warn("[DEPRECATED] atom.unstable_onInit is renamed to atom.INTERNAL_onInit."),n.unstable_onInit(t)},st=(t,n,o)=>{var e;return(e=n.onMount)==null?void 0:e.call(n,o)},it=(t,n)=>{var o;const e=g(t),s=e[0],i=e[6],u=e[9];if((w?"production":void 0)!=="production"&&!n)throw new Error("Atom is undefined or null");let f=s.get(n);return f||(f={d:new Map,p:new Set,n:0},s.set(n,f),(o=i.i)==null||o.call(i,n),u?.(t,n)),f},ct=t=>{const n=g(t),o=n[1],e=n[3],s=n[4],i=n[5],u=n[6],f=n[13],d=[],c=a=>{try{a()}catch(r){d.push(r)}};do{u.f&&c(u.f);const a=new Set,r=a.add.bind(a);e.forEach(_=>{var l;return(l=o.get(_))==null?void 0:l.l.forEach(r)}),e.clear(),i.forEach(r),i.clear(),s.forEach(r),s.clear(),a.forEach(c),e.size&&f(t)}while(e.size||i.size||s.size);if(d.length)throw new AggregateError(d)},rt=t=>{const n=g(t),o=n[1],e=n[2],s=n[3],i=n[11],u=n[14],f=n[17],d=[],c=new WeakSet,a=new WeakSet,r=Array.from(s);for(;r.length;){const _=r[r.length-1],l=i(t,_);if(a.has(_)){r.pop();continue}if(c.has(_)){if(e.get(_)===l.n)d.push([_,l]);else if((w?"production":void 0)!=="production"&&e.has(_))throw new Error("[Bug] invalidated atom exists");a.add(_),r.pop();continue}c.add(_);for(const h of q(_,l,o))c.has(h)||r.push(h)}for(let _=d.length-1;_>=0;--_){const[l,h]=d[_];let m=!1;for(const b of h.d.keys())if(b!==l&&s.has(b)){m=!0;break}m&&(u(t,l),f(t,l)),e.delete(l)}},T=new WeakSet,ut=(t,n)=>{var o,e;const s=g(t),i=s[1],u=s[2],f=s[3],d=s[6],c=s[7],a=s[11],r=s[12],_=s[13],l=s[14],h=s[16],m=s[17],b=s[20],v=a(t,n);if(z(v)){if(i.has(n)&&u.get(n)!==v.n)return v;let p=!1;for(const[E,L]of v.d)if(l(t,E).n!==L){p=!0;break}if(!p)return v}v.d.clear();let S=!0;function A(){i.has(n)&&(m(t,n),_(t),r(t))}function D(p){var E;if(p===n){const x=a(t,p);if(!z(x))if(j(p))b(t,p,p.init);else throw new Error("no atom init");return C(x)}const L=l(t,p);try{return C(L)}finally{v.d.set(p,L.n),J(v.v)&&$(n,v.v,L),i.has(n)&&((E=i.get(p))==null||E.t.add(n)),S||A()}}let k,B;const N={get signal(){return k||(k=new AbortController),k.signal},get setSelf(){return(w?"production":void 0)!=="production"&&!R(n)&&console.warn("setSelf function cannot be used with read-only atom"),!B&&R(n)&&(B=(...p)=>{if((w?"production":void 0)!=="production"&&S&&console.warn("setSelf function cannot be called in sync"),!S)try{return h(t,n,...p)}finally{_(t),r(t)}}),B}},V=v.n;try{(w?"production":void 0)!=="production"&&T.delete(t);const p=c(t,n,D,N);return(w?"production":void 0)!=="production"&&T.has(t)&&console.warn("Detected store mutation during atom read. This is not supported."),b(t,n,p),M(p)&&(U(p,()=>k?.abort()),p.then(A,A)),(o=d.r)==null||o.call(d,n),v}catch(p){return delete v.v,v.e=p,++v.n,v}finally{S=!1,V!==v.n&&u.get(n)===V&&(u.set(n,v.n),f.add(n),(e=d.c)==null||e.call(d,n))}},at=(t,n)=>{const o=g(t),e=o[1],s=o[2],i=o[11],u=[n];for(;u.length;){const f=u.pop(),d=i(t,f);for(const c of q(f,d,e)){const a=i(t,c);s.set(c,a.n),u.push(c)}}},lt=(t,n,...o)=>{const e=g(t),s=e[3],i=e[6],u=e[8],f=e[11],d=e[12],c=e[13],a=e[14],r=e[15],_=e[16],l=e[17],h=e[20];let m=!0;const b=S=>C(a(t,S)),v=(S,...A)=>{var D;const k=f(t,S);try{if(S===n){if(!j(S))throw new Error("atom not writable");(w?"production":void 0)!=="production"&&T.add(t);const B=k.n,N=A[0];h(t,S,N),l(t,S),B!==k.n&&(s.add(S),r(t,S),(D=i.c)==null||D.call(i,S));return}else return _(t,S,...A)}finally{m||(c(t),d(t))}};try{return u(t,n,b,v,...o)}finally{m=!1}},dt=(t,n)=>{var o;const e=g(t),s=e[1],i=e[3],u=e[6],f=e[11],d=e[15],c=e[18],a=e[19],r=f(t,n),_=s.get(n);if(_&&!J(r.v)){for(const[l,h]of r.d)if(!_.d.has(l)){const m=f(t,l);c(t,l).t.add(n),_.d.add(l),h!==m.n&&(i.add(l),d(t,l),(o=u.c)==null||o.call(u,l))}for(const l of _.d)if(!r.d.has(l)){_.d.delete(l);const h=a(t,l);h?.t.delete(n)}}},ft=(t,n)=>{var o;const e=g(t),s=e[1],i=e[4],u=e[6],f=e[10],d=e[11],c=e[12],a=e[13],r=e[14],_=e[16],l=e[18],h=d(t,n);let m=s.get(n);if(!m){r(t,n);for(const b of h.d.keys())l(t,b).t.add(n);if(m={l:new Set,d:new Set(h.d.keys()),t:new Set},s.set(n,m),R(n)){const b=()=>{let v=!0;const S=(...A)=>{try{return _(t,n,...A)}finally{v||(a(t),c(t))}};try{const A=f(t,n,S);A&&(m.u=()=>{v=!0;try{A()}finally{v=!1}})}finally{v=!1}};i.add(b)}(o=u.m)==null||o.call(u,n)}return m},_t=(t,n)=>{var o,e;const s=g(t),i=s[1],u=s[5],f=s[6],d=s[11],c=s[19],a=d(t,n);let r=i.get(n);if(!r||r.l.size)return r;let _=!1;for(const l of r.t)if((o=i.get(l))!=null&&o.d.has(n)){_=!0;break}if(!_){r.u&&u.add(r.u),r=void 0,i.delete(n);for(const l of a.d.keys()){const h=c(t,l);h?.t.delete(n)}(e=f.u)==null||e.call(f,n);return}return r},vt=(t,n,o)=>{const e=g(t)[11],s=e(t,n),i="v"in s,u=s.v;if(M(o))for(const f of s.d.keys())$(n,o,e(t,f));s.v=o,delete s.e,(!i||!Object.is(u,s.v))&&(++s.n,M(u)&&tt(u))},pt=(t,n)=>{const o=g(t)[14];return C(o(t,n))},ht=(t,n,...o)=>{const e=g(t),s=e[12],i=e[13],u=e[16];try{return u(t,n,...o)}finally{i(t),s(t)}},St=(t,n,o)=>{const e=g(t),s=e[12],i=e[18],u=e[19],d=i(t,n).l;return d.add(o),s(t),()=>{d.delete(o),u(t,n),s(t)}},Q=new WeakMap,g=t=>{const n=Q.get(t);if((w?"production":void 0)!=="production"&&!n)throw new Error("Store must be created by buildStore to read its building blocks");return n};function gt(...t){const n={get(e){const s=g(n)[21];return s(n,e)},set(e,...s){const i=g(n)[22];return i(n,e,...s)},sub(e,s){const i=g(n)[23];return i(n,e,s)}},o=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},nt,et,ot,st,it,ct,rt,ut,at,lt,dt,ft,_t,vt,pt,ht,St,void 0].map((e,s)=>t[s]||e);return Q.set(n,Object.freeze(o)),n}const X={};let mt=0;function Dt(t,n){const o=`atom${++mt}`,e={toString(){return(X?"production":void 0)!=="production"&&this.debugLabel?o+":"+this.debugLabel:o}};return typeof t=="function"?e.read=t:(e.init=t,e.read=bt,e.write=At),e}function bt(t){return t(this)}function At(t,n,o){return n(this,typeof o=="function"?o(t(this)):o)}function Y(){return gt()}let y;function wt(){return y||(y=Y(),(X?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=y),globalThis.__JOTAI_DEFAULT_STORE__!==y&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),y}const It={},G=I.createContext(void 0);function Z(t){return I.useContext(G)||wt()}function Et({children:t,store:n}){const o=I.useRef(null);return n?I.createElement(G.Provider,{value:n},t):(o.current===null&&(o.current=Y()),I.createElement(G.Provider,{value:o.current},t))}const K=t=>typeof t?.then=="function",W=t=>{t.status||(t.status="pending",t.then(n=>{t.status="fulfilled",t.value=n},n=>{t.status="rejected",t.reason=n}))},kt=F.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(W(t),t)}),P=new WeakMap,H=(t,n)=>{let o=P.get(t);return o||(o=new Promise((e,s)=>{let i=t;const u=c=>a=>{i===c&&e(a)},f=c=>a=>{i===c&&s(a)},d=()=>{try{const c=n();K(c)?(P.set(c,o),i=c,c.then(u(c),f(c)),U(c,d)):e(c)}catch(c){s(c)}};t.then(u(t),f(t)),U(t,d)}),P.set(t,o)),o};function Bt(t,n){const{delay:o,unstable_promiseStatus:e=!F.use}={},s=Z(),[[i,u,f],d]=I.useReducer(a=>{const r=s.get(t);return Object.is(a[0],r)&&a[1]===s&&a[2]===t?a:[r,s,t]},void 0,()=>[s.get(t),s,t]);let c=i;if((u!==s||f!==t)&&(d(),c=s.get(t)),I.useEffect(()=>{const a=s.sub(t,()=>{if(e)try{const r=s.get(t);K(r)&&W(H(r,()=>s.get(t)))}catch{}if(typeof o=="number"){setTimeout(d,o);return}d()});return d(),a},[s,t,o,e]),I.useDebugValue(c),K(c)){const a=H(c,()=>s.get(t));return e&&W(a),kt(a)}return c}function Lt(t,n){const o=Z();return I.useCallback((...s)=>{if((It?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return o.set(t,...s)},[o,t])}function Ct(t,n){return[Bt(t),Lt(t)]}export{Et as P,Dt as a,Y as c,Ct as u};
